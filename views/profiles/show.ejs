<%- include('../partials/html-head') %>
<%- include('../partials/nav') %>

<main>
    <!-- Loads Profile -->
  <% if (profile.avatar) { %>
    <div>
      <img
        class="profile-avatar"
        src="<%= profile.avatar %>"
        alt="<%= profile.name %>'s avatar"
      >
    </div>
  <% } %>
  <!-- Loads cats with profile -->
  <h1>It's <%= isSelf ? "you" : profile.name %>!</h1>
  <% if (isSelf) { %>
    <h2>Add a review!</h2>
    <form action="/profiles/<%= profile._id %>/reviews" method="POST">
      <label>
        Name of Restaurant:
        <input type="text" name="name" autocomplete="off">
      </label>
      <label>
        Would Recommend:
        <input type="boolean" name="wouldRecommend" autocomplete="off">
      </label>
      <label>
        Location:
        <input type="text" name="location" autocomplete="off">
      </label>
      <label>
        General Feedback:
        <input type="text" name="generalFeedback" autocomplete="off">
      </label>

      <button type="submit">Add Review!</button>
    </form>
  <% } %>
  <!-- Displays Cats -->
  <% if (profile.reviews.length) { %>
    <h2>
      <%= isSelf ? "You have" : `${profile.name} have left` %> reviews! 
    </h2>
    <!-- Deletes Cats -->
    <% profile.reviews.forEach(review => { %>
      <h3>
        <% if (isSelf) { %>
          <form 
            action="/profiles/reviews/<%= review._id %>?_method=DELETE"
            method="POST"
            style="display: inline-block;"
          >
          <%= review.name %>
          <%= review.location %>
          <%= review.wouldRecommend %>
          <%= review.generalFeedback %>
            <button type="submit"> Delete Review <%= review.name %></button>
          </form>
        <% } %> 
      </h3>
    <% }) %>
  <% } else { %>
    <h2>
      <%= isSelf ? "You don't" : `${profile.name} doesn't` %> have any reviews. 
    </h2>
  <% } %>
</main>

<!-- <% function getRandomCat() { %> 
  <% let cats = ["ðŸˆ", "ðŸ±", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜º", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜¾", "ðŸ˜¿", "ðŸ™€"] %> 
  <% return cats[Math.floor(Math.random() * cats.length)] %>
<% } %>  -->

<%- include('../partials/footer') %>